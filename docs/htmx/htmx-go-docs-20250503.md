Title: GitHub - angelofallars/htmx-go: </> Build awesome HTMX + Go projects faster.

URL Source: https://github.com/angelofallars/htmx-go

Markdown Content:
[![Image 1](https://private-user-images.githubusercontent.com/39676098/284788144-c1a14954-27fd-4276-8948-0800e5372b14.svg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDYyNjI5NTYsIm5iZiI6MTc0NjI2MjY1NiwicGF0aCI6Ii8zOTY3NjA5OC8yODQ3ODgxNDQtYzFhMTQ5NTQtMjdmZC00Mjc2LTg5NDgtMDgwMGU1MzcyYjE0LnN2Zz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA1MDMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwNTAzVDA4NTczNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWY3YTllNjczMjk1NjJhZTQ0OTM2Yjk2OWEyYTZhYjZhNGNhZTVjZDlhNGEzMzViNjc3Y2NiMTI1ODgxN2JhZTkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.TkEHeV2uckuqqp1G3qc7vMUr8cMNV6pg819xOosInLQ)](https://private-user-images.githubusercontent.com/39676098/284788144-c1a14954-27fd-4276-8948-0800e5372b14.svg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDYyNjI5NTYsIm5iZiI6MTc0NjI2MjY1NiwicGF0aCI6Ii8zOTY3NjA5OC8yODQ3ODgxNDQtYzFhMTQ5NTQtMjdmZC00Mjc2LTg5NDgtMDgwMGU1MzcyYjE0LnN2Zz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA1MDMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwNTAzVDA4NTczNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWY3YTllNjczMjk1NjJhZTQ0OTM2Yjk2OWEyYTZhYjZhNGNhZTVjZDlhNGEzMzViNjc3Y2NiMTI1ODgxN2JhZTkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.TkEHeV2uckuqqp1G3qc7vMUr8cMNV6pg819xOosInLQ)
--------------------------------------------------------------------------------------------------------------------------------

[](https://github.com/angelofallars/htmx-go#)

[![Image 2: GoDoc](https://camo.githubusercontent.com/685bf60a402c4df1190457a01ce2ab4d118c3ee3974712fb1530b805669b0941/68747470733a2f2f706b672e676f2e6465762f62616467652f6769746875622e636f6d2f616e67656c6f66616c6c6172732f68746d782d676f3f7374617475732e737667)](https://pkg.go.dev/github.com/angelofallars/htmx-go?tab=doc) [![Image 3: GitHub Workflow Status (with event)](https://camo.githubusercontent.com/e393d9198cd4e49e7b442092341093ec362bd0ea530ade1fb53a42f5e0c56eb5/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f616e67656c6f66616c6c6172732f68746d782d676f2f676f2e796d6c3f63616368655365636f6e64733d3330)](https://github.com/angelofallars/htmx-go/actions) [![Image 4: License](https://camo.githubusercontent.com/924d450eeb8b9f401557c3c6062d7a9bfb3e7351a5743d0a6c28edb2728b2a2b/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f616e67656c6f66616c6c6172732f68746d782d676f)](https://github.com/angelofallars/htmx-go/blob/main/LICENSE) [![Image 5: Stars](https://camo.githubusercontent.com/4337cfef52f1565207fb7a8b41ceb1c8f18f336230168ab90462c4ee162392e2/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f616e67656c6f66616c6c6172732f68746d782d676f)](https://github.com/angelofallars/htmx-go/stargazers) [![Image 6: Discord](https://camo.githubusercontent.com/b8003cbc21cd1b1eb123b49d97608d2aabe218bce1d6249d88f09fec5efda248/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f3732353738393639393532373933333935323f6c6162656c3d68746d78253230646973636f7264)](https://htmx.org/discord)

htmx-go is a **type-safe** library for working with [HTMX](https://htmx.org/) in Go.

Less time fiddling with HTTP headers, more time developing awesome Hypermedia-driven applications.

Check if requests are from HTMX, and use a type-safe, declarative syntax for HTMX response headers to control HTMX behavior from the server.

Write [triggers](https://github.com/angelofallars/htmx-go#triggers) for client-side events effectively without dealing with JSON serialization. With this approach, **event-driven** applications are easier to develop.

Use [Swap Strategy](https://github.com/angelofallars/htmx-go#swap-strategy) methods to fine-tune `hx-swap` behavior.

Uses standard `net/http` types. Has basic [integration](https://github.com/angelofallars/htmx-go#templ-integration) with [templ](https://templ.guide/) components.

import (
	"net/http"

	"github.com/angelofallars/htmx-go"
)

func handler(w http.ResponseWriter, r \*http.Request) {
	if htmx.IsHTMX(r) {
		htmx.NewResponse().
			Reswap(htmx.SwapBeforeEnd).
			Retarget("#contacts").
			AddTrigger(htmx.Trigger("enable-submit")).
			AddTrigger(htmx.TriggerDetail("display-message", "Hello world!")).
			Write(w)
	}
}

> Think this project is awesome? [Consider sponsoring me](https://github.com/sponsors/angelofallars) ðŸ’™

Installation
------------

[](https://github.com/angelofallars/htmx-go#installation)

Use go get.

go get github.com/angelofallars/htmx-go

Then import htmx-go:

import "github.com/angelofallars/htmx-go"

HTMX Requests
-------------

[](https://github.com/angelofallars/htmx-go#htmx-requests)

### Check request origin

[](https://github.com/angelofallars/htmx-go#check-request-origin)

You can determine if a request is from HTMX. With this, you can add custom handling for non-HTMX requests.

You can also use this for checking if this is a GET request for the initial page load on your website, as initial page load requests don't use HTMX.

func handler(w http.ResponseWriter, r \*http.Request) {
	if htmx.IsHTMX(r) {
		// logic for handling HTMX requests
	} else {
		// logic for handling non-HTMX requests (e.g. render a full page for first-time visitors)
	}
}

### Check if request is Boosted (`hx-boost`)

[](https://github.com/angelofallars/htmx-go#check-if-request-is-boosted-hx-boost)

func handler(w http.ResponseWriter, r \*http.Request) {
	if htmx.IsBoosted(r) {
		// logic for handling boosted requests
	} else {
		// logic for handling non-boosted requests
	}
}

HTMX responses
--------------

[](https://github.com/angelofallars/htmx-go#htmx-responses)

htmx-go takes inspiration from [Lip Gloss](https://github.com/charmbracelet/lipgloss) for a declarative way of specifying HTMX response headers.

### Basic usage

[](https://github.com/angelofallars/htmx-go#basic-usage)

Make a response writer with `htmx.NewResponse()`, and add a header to it to make the page refresh:

func handler(w http.ResponseWriter, r \*http.Request) {
	writer := htmx.NewResponse().Refresh(true)
	writer.Write(w)
}

### Retarget response to a different element

[](https://github.com/angelofallars/htmx-go#retarget-response-to-a-different-element)

func handler(w http.ResponseWriter, r \*http.Request) {
	htmx.NewResponse().
		// Override 'hx-target' to specify which target to load into
		Retarget("#errors").
		// Also override the 'hx-swap' value of the request
		Reswap(htmx.SwapBeforeEnd).
		Write(w)
}

### Triggers

[](https://github.com/angelofallars/htmx-go#triggers)

[HTMX Reference: `hx-trigger`](https://htmx.org/headers/hx-trigger/)

You can add triggers to trigger client-side [events](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events). htmx-go takes care of formatting and JSON serialization of the header values.

Define event triggers:

*   `htmx.Trigger(eventName string)` - A trigger with no details.
*   `htmx.TriggerDetail(eventName string, detailValue string)` - A trigger with one detail value.
*   `htmx.TriggerObject(eventName string, detailObject any)` - A trigger with a JSON-serializable detail object. Recommended to pass in either `map[string]string` or structs with JSON field tags.

Set trigger headers using the preceding triggers:

*   `Response.AddTrigger(trigger ...EventTrigger)` - appends to the `HX-Trigger` header
*   `Response.AddTriggerAfterSettle(trigger ...EventTrigger)` - appends to the `HX-Trigger-After-Settle` header
*   `Response.AddTriggerAfterSwap(trigger ...EventTrigger)` - appends to the `HX-Trigger-After-Swap` header

htmx.NewResponse().
	AddTrigger(htmx.Trigger("myEvent"))
// HX-Trigger: myEvent

htmx.NewResponse().
	AddTrigger(htmx.TriggerDetail("showMessage", "Here Is A Message"))
// HX-Trigger: {"showMessage":"Here Is A Message"}

htmx.NewResponse().
	AddTrigger(
		htmx.TriggerDetail("hello", "world"),
		htmx.TriggerObject("myEvent", map\[string\]string{
			"level":   "info",
			"message": "Here Is A Message",
		}),
	)
// HX-Trigger: {"hello":"world","myEvent":{"level":"info","message":"Here is a Message"}}

Tip

[Alpine.js](https://alpinejs.dev/) and [Hyperscript](https://hyperscript.org/) can listen to and receive details from events triggered by htmx-go. This makes triggers initiated by the server very handy for event-driven applications!

For Alpine.js, you can register an `x-on:<EventName>.window` listener. The `.window` modifier is important because HTMX dispatches events from the root `window` object. To receive values sent by `htmx.TriggerDetail` and `htmx.TriggerObject`, you can use `$event.detail.value`.

### Swap strategy

[](https://github.com/angelofallars/htmx-go#swap-strategy)

[HTMX Reference: `hx-swap`](https://htmx.org/attributes/hx-swap/)

`Response.Reswap()` takes in `SwapStrategy` values from this library.

htmx.NewResponse().
	Reswap(htmx.SwapInnerHTML)
// HX-Reswap: innerHTML

htmx.NewResponse().
	Reswap(htmx.SwapAfterEnd.Transition(true))
// HX-Reswap: innerHTML transition:true

Exported `SwapStrategy` constant values can be appended with modifiers through their methods. If successive methods write to the same modifier, the modifier is always replaced with the latest one.

import "time"

htmx.SwapInnerHTMl.After(time.Second \* 1)
// HX-Reswap: innerHTML swap:1s

htmx.SwapBeforeEnd.Scroll(htmx.Bottom)
// HX-Reswap: beforeend scroll:bottom

htmx.SwapAfterEnd.IgnoreTitle(true)
// HX-Reswap: afterend ignoreTitle:true

htmx.SwapAfterEnd.FocusScroll(true)
// HX-Reswap: afterend ignoreTitle:true

htmx.SwapInnerHTML.ShowOn("#another-div", htmx.Top)
// HX-Reswap: innerHTML show:#another-div:top

// Modifier chaining
htmx.SwapInnerHTML.ShowOn("#another-div", htmx.Top).After(time.Millisecond \* 500)
// HX-Reswap: innerHTML show:#another-div:top swap:500ms

htmx.SwapBeforeBegin.ShowWindow(htmx.Top)
// HX-Reswap: beforebegin show:window:top

htmx.SwapDefault.ShowNone()
// HX-Reswap: show:none

### Code organization

[](https://github.com/angelofallars/htmx-go#code-organization)

HTMX response writers can be declared outside of functions with `var` so you can reuse them in several places.

Caution

If you're adding additional headers to a global response writer, always use the `.Clone()` method to avoid accidentally modifying the global response writer.

var deleter \= htmx.NewResponse().
    Reswap(htmx.SwapDelete)

func(w http.ResponseWriter, r \*http.Request) {
	deleter.Clone().
		Reselect("#messages").
		Write(w)
}

### Templ integration

[](https://github.com/angelofallars/htmx-go#templ-integration)

HTMX pairs well with [Templ](https://templ.guide/), and this library is no exception. You can render both the necessary HTMX response headers and Templ components in one step with the `.RenderTempl()` method.

// hello.templ
templ Hello() {
    <div\>Hello { name }!</div\>
}

// main.go
func(w http.ResponseWriter, r \*http.Request) {
	htmx.NewResponse().
		Retarget("#hello").
		RenderTempl(r.Context(), w, Hello())
}

Note

To avoid issues with custom HTTP status code headers with this approach, it's recommended to use `Response().StatusCode()` so the status code header is always set after the HTMX headers.

### Stop polling

[](https://github.com/angelofallars/htmx-go#stop-polling)

If you have an element that is polling a URL and you want it to stop, use the `htmx.StatusStopPolling` 286 status code in a response to cancel the polling. [HTMX documentation reference](https://htmx.org/docs/#polling)

w.WriteHeader(htmx.StatusStopPolling)

Header names
------------

[](https://github.com/angelofallars/htmx-go#header-names)

If you need to work with HTMX headers directly, htmx-go provides constant values for all HTTP header field names of HTMX so you don't have to write them yourself. This mitigates the risk of writing header names with typos.

// Request headers
const (
	HeaderBoosted               \= "HX-Boosted"
	HeaderCurrentURL            \= "HX-Current-URL"
	HeaderHistoryRestoreRequest \= "HX-History-Restore-Request"
	HeaderPrompt                \= "HX-Prompt"
	HeaderRequest               \= "HX-Request"
	HeaderTarget                \= "HX-Target"
	HeaderTriggerName           \= "Hx-Trigger-Name"
)

// Common headers
const (
	HeaderTrigger \= "HX-Trigger"
)

// Response headers
const (
	HeaderLocation           \= "HX-Location"
	HeaderPushURL            \= "HX-Push-Url"
	HeaderRedirect           \= "HX-Redirect"
	HeaderRefresh            \= "HX-Refresh"
	HeaderReplaceUrl         \= "HX-Replace-Url"
	HeaderReswap             \= "HX-Reswap"
	HeaderRetarget           \= "HX-Retarget"
	HeaderReselect           \= "HX-Reselect"
	HeaderTriggerAfterSettle \= "HX-Trigger-After-Settle"
	HeaderTriggerAfterSwap   \= "HX-Trigger-After-Swap"
)

Compatibility
-------------

[](https://github.com/angelofallars/htmx-go#compatibility)

This library is compatible with the standard `net/http` library, as well as other routers like Chi and Gorilla Mux that use the standard `http.HandlerFunc` handler type.

With the Echo web framework, try passing in `context.Request()` and `context.Response().Writer` for requests and responses, respectively.

With the Gin web framework on the other hand, try using `context.Request` and `context.Writer`.

If you use Fiber, it is recommended to use [`htmx-fiber`](https://github.com/sopa0/htmx-fiber) instead, which is a fork of htmx-go.

Additional resources
--------------------

[](https://github.com/angelofallars/htmx-go#additional-resources)

*   [HTMX - HTTP Header Reference](https://htmx.org/reference/#headers)

Contributing
------------

[](https://github.com/angelofallars/htmx-go#contributing)

Pull requests are welcome!

License
-------

[](https://github.com/angelofallars/htmx-go#license)

[MIT](https://github.com/angelofallars/htmx-go/blob/main/LICENSE)
